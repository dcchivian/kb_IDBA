#
# define display information
#
name: Assemble with IDBA-UD
tooltip: |
    Assemble paired-end reads from single-cell or metagenomic sequencing technologies using the IDBA-UD assembler.
screenshots: []

icon: idba-ud.png

#
# define a set of similar methods that might be useful to the user
#
suggestions:
    apps:
        related:
            []
        next:
            []
    methods:
        related:
            []
        next:
            [annotate_contigset]

#
# Configure the display and description of parameters
#
parameters :
    read_libraries :
        ui-name : |
            Read library
        short-hint : |
            The libraries of reads (length upto 500bp) to be assembled.
        long-hint : |
            The libraries of reads (length upto 500bp) to be assembled.
    output_contigset_name :
        ui-name : |
            Output ContigSet
        short-hint : |
            The name under which the resulting ContigSet will be saved in the Narrative
        long-hint : |
            The name under which the resulting ContigSet will be saved in the Narrative
    min_contig_arg :
        ui-name : |
            Minimum Contig Length
        short-hint : |
            The shortest contig to accept in the resulting assembly object, should be less than largest output contig size
    mink_arg :
        ui-name : |
            Minimum k value
        short-hint : |
            Minimum k value (<=124)
        long-hint : |
            Minimum k value (<=124)
    maxk_arg :
        ui-name : |
            Maximum k value
        short-hint : |
            Maximum k value (<=124), should be > minimum k
        long-hint : |
            Maximum k value (<=124), should be > minimum k
    step_arg :
        ui-name : |
            Increment of k-mer
        short-hint : |
            Increment of k-mer for each iteration, should be appropriate to minimum and maximum k values
        long-hint : |
            Increment of k-mer for each iteration, should be appropriate to minimum and maximum k values
    extra_params :
        ui-name : |
            Advanced assembly parameters
        short-hint : |
            Enter extra assembly parameters as strings

#
# Configure the display and description of parameters
#
parameter-groups:
        kval_args :
                ui-name : |
                        k values
                short-hint : |
                        Min, max k values and increment of k-mer
                long-hint : |
                        Min, max k values and increment of k-mer


description : |
    <p>
    This is a KBase wrapper for the
    <a href="https://github.com/loneknightpy/idba" target="_blank">IDBA</a>
    genomic reads assembler.
    </p>

    <p>
    IDBA-UD is an iterative graph-based assembler for single-cell and standard short read data.
    IDBA-UD is an extension of IDBA algorithm and is good for data of highly uneven sequencing depth.
    In its assembly process, IDBA-UD iterates from small k to a large k. In each iteration, short and
    low-depth contigs are removed iteratively with cutoff threshold from low to high to reduce the errors
    in low-depth and high-depth regions. This iterative approach compensates for the information loss with
    de bruijn graphs constructed using a single kmer length. For this reason, IDBA-UD is considered one of
    the more accurate microbial assemblers.
    </p>
    <p>
    <b>Known limitations:</b> IDBA-UD only works with paired-end reads, as they are are aligned to contigs
    and assembled locally to generate some missing k-mers in low-depth regions.
    </p>
    <p>IDBA version: 1.1.3.</p>
    <b>Parameters:</b>
    <pre>
    IDBA-UD - Iterative de Bruijn Graph Assembler for sequencing data with highly uneven depth.
    Allowed Options:
      -o, --out arg (=out)                   output directory
      -r, --read arg                         fasta read file (<=128)
          --read_level_2 arg                 paired-end reads fasta for second level scaffolds
          --read_level_3 arg                 paired-end reads fasta for third level scaffolds
          --read_level_4 arg                 paired-end reads fasta for fourth level scaffolds
          --read_level_5 arg                 paired-end reads fasta for fifth level scaffolds
      -l, --long_read arg                    fasta long read file (>128)
          --mink arg (=20)                   minimum k value (<=124)
          --maxk arg (=100)                  maximum k value (<=124)
          --step arg (=20)                   increment of k-mer of each iteration
          --inner_mink arg (=10)             inner minimum k value
          --inner_step arg (=5)              inner increment of k-mer
          --prefix arg (=3)                  prefix length used to build sub k-mer table
          --min_count arg (=2)               minimum multiplicity for filtering k-mer when building the graph
          --min_support arg (=1)             minimum supoort in each iteration
          --num_threads arg (=0)             number of threads
          --seed_kmer arg (=30)              seed kmer size for alignment
          --min_contig arg (=200)            minimum size of contig
          --similar arg (=0.95)              similarity for alignment
          --max_mismatch arg (=3)            max mismatch of error correction
          --min_pairs arg (=3)               minimum number of pairs
          --no_bubble                        do not merge bubble
          --no_local                         do not use local assembly
          --no_coverage                      do not iterate on coverage
          --no_correct                       do not do correction
          --pre_correction                   perform pre-correction before assembly
    </pre>

publications :
    -
        display-text : |
            Peng, Y., Leung, H. C. M., Yiu, S. M., Chin, F. Y. L. (2012) IDBA-UD: a de novo assembler for single-cell and metagenomic sequencing data with highly uneven depth. Bioinformatics, 28(11), 1420-1428, doi: 10.1093/bioinformatics/bts174
